#!/bin/bash
# assign Global variables
# Note: does not (yet) support cross-compile
# BUILD is now generated by make_sources.sh using KERNEL_VERSION made available here
#
# verify that kernel sources are installed at /usr/src/linux -- and get KERNEL_VERSION
kernel_sources_dir=/usr/src/linux
old_dir=$(pwd)
if [ -L ${kernel_sources_dir}  ] || [ -d ${kernel_sources_dir} ]
then
  cd /usr/src/linux
  # get kernel version number
  # (silence possible complaint from dist-kernel about - make should not be run manually here )
  KERNEL_VERSION=$(eval make -s kernelversion 2>/dev/null)
  cd ${old_dir}
else
  # cannot use E_message yet - script_header_joetoo cannot load until located by assignments below
  echo "Could not find kernel sources. Did you emerge (e.g.) sys-kernel/gentoo-kernel ?"
  exit 1
fi

# Now assign the rest of the global variables
DATE_STAMP="$(date +%Y%m%d%H%M)"
#SOURCES_DIR="/usr/src/initramfs"
SOURCES_DIR="/home/joe/myUtilities/dev-util/mkinitramfs/scratch/initramfs"
SCRIPT_HEADER_DIR="/usr/sbin"
#MAKE_DIR=$(pwd)
MAKE_DIR="/home/joe/myUtilities/dev-util/mkinitramfs"
