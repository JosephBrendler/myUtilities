#!/bin/sh
#
# joetoo_cli_example.conf   (c) joe brendler  2026-4795
#
# template application config file - use as a template for configuring your own apps
#    uncomment assignments below to override defaults and customize
#    (use at your own risk, of course)

# user - primary user of the app, who will need write privileges on logs, config files, and status files
#user=joe

# logFile - generated each time the app runs, three copies rotated
#logFile="/var/log/${PN}.log"

# confit_dir - files resident here and ending .conf (like THIS one) are sourced to override defaults
#config_dir="/etc/${PN}"

# interactive (supervised mode)
#INTERACTIVE=$FALSE
#INTERACTIVE=$TRUE

# app_customization_root - normally also /etc/${PN} - local extensions of the cli framework go here
#  local_cmdline_arguments will be set to the first file found in app_customization_root
#     matching [[:alnum:]]*_local.cmdline_arguments = local extensions of the cli allowed argument framework
#     (e.g. --example --create --destroy --board --target)

#  local_cmdline_compound_arguments will be set to the first file found in app_customization_root
#     matching [[:alnum:]]*_local.cmdline_compound_arguments = local extensions of the cli allowed compound
#     argument framework (e.g. -ecdbt)

#  local_usagethe will be set to the first file found in app_customization_root
#     matching [[:alnum:]]*_local.usage will = formatted usage text to be appended to the
#     framework's standard usage (-h|--help) message

# status_file - holds an integer representing the NEXT step after the last successfully completed step
#   RESUME action is to read this file and set starting_step equal to this value (if it is in range)
#status_file="${HOME}/.config/${PN}.status"

# verbosity - like log_level - how verbose do you want the app to be (see RFC 5424)
#   0=emerg ... 5=notice ... 7=debug
#verbosity=7
#export QUIET=$FALSE
#export DEBUG=$FALSE
# it is strongly recommended not to set these here but rather use -q/-v or -Q/-V on commandline
# setting then here can interfere with initialization, so another alternative
# is to re-set them in your script, after initialization is complete (app_configure)

# NOTE: varlist variables are initialized by app_configure() and displayed by show_config();
# the basic set of varlist variables is defined in script_header_joetoo and can be extended
# either in the using script or in its .conf files.
## note: all varlist variables (including logFile and verbosity) get anulled by initialize_vars,
# so they must be explicitly reassigned (as app_configure does for this set).
# the easiest way to ensure custom additions to varlist are properly initialized and then reassigned
# prior to main script use is to place the extending definitions in .conf file in the
# /etc/<package_name> configuration directory ($config_dir).  A commented out copy of this
# information is provided in the template config file to exemplify
#varlist="PN BUILD user logFile status_file config_dir config_files verbosity"
#varlist="${varlist} num_cmds starting_step stopping_step BREAK"
#varlist="${varlist} bool.INTERACTIVE bool.RESUME bool.LOGGING bool.QUIET bool.DEBUG"
#varlist="${varlist} bool.handle_local_arg_EXISTS bool.handle_local_compound_arg_EXISTS"
#varlist="${varlist} bool.handle_local_usage_EXISTS"
#varlist="${varlist} app_customization_root local_cmdline_arg_handler"
# NOTE: DO NOT MODIFY/EDIT THIS LIST, IT IS PROVIDED HERE FOR REFERENCE ONLY
# (Extend its functionality by appending local variables as shown below, or
#  in the variable definition section or your main script.)
# ( patch/report bugs in script_header_joetoo )

### Localization

# Add other variables needed by your customized arguments here, if you want to default them
#BOARD="bcm2712-rpi-5-b"

# NOTE: varlist variables are initialized by app_configure() and displayed by show_config();
# the basic set of varlist variables is defined in script_header_joetoo and can be extended
# either in the using script or in its .conf files.
# An example is provided in the joetoo_cli_example script and in the template joetoo_cli_example.conf
#
# BREAK tells display_vars to add a newline spacer in its output
# $LOCALIZED exemplifies use of the joetoo pseudo-boolean data type for POSIX scripts
# $EXAMPLE and $DEFAULTS are pseudo-booleans defined in joetoo_cli_example_local.cmdline_arg_handler
# $INITIALIZED_ME and $SOURCED_ME exemplify use of the joetoo yn data type
# Note how each is named and how these types are prefixed in the varlist, to inform initialize_vars
# and display_vars how to handle them.
# $longone is a long string defined in script_header_joetoo to test and illustrate smart wrapping
# by the smart_wrap_n() function. its name is prefixed "lv." in this localized extension of varlist
# to indicate (long variable), so display_vars will use smart_wrap_n() to display the content of
# $longone (which is long-one btw, not long-gone)
#
# CAVEAT: varlist is instantiated when script_header_joetoo is sourced (above), so it IS safe to add
# variable names to it in a "variables" section at the top of your main script, but note that
# the standard joetoo cli script layout calls app_configure() after that --
# so anything you add to varlist before app_configure will be over-written when app_configure
# calls initialize_var. which sets all bool. to $FALSE, all yn. to "no" and all others to ""
#
# Bottom line: you can append variable names to varlist at the top of your script, but if you do, you
# ALSO need to reassign them AFTER app_configure runs. Thus it is "easier" to just append
# variable names to varlist in the .conf file, which app_configure() loads AFTER it calls
# initialize_vars, but be sure to also assign them, b/c they will not be initialized otherwise
export INTERACTIVE=$TRUE
export LOGGING=$TRUE
#SOURCED_ME=yes
#varlist="${varlist} yn.SOURCED_ME bool.EXAMPLE bool.DEFAULTS myOperand"

# basic configuration variables and internals
conf_varlist+="PORTDIR PKGDIR DISTDIR PORTAGE_LOGDIR ELOG_DIR"
conf_varlist+=" yn.EIX yn.DISTCC"
conf_varlist+=" worldfile"
# phase 0
p0_varlist+="yn.SYNC SYNC_TS SYNC_CMD MAX_AGE"
p0_varlist+=" yn.REGEN_OVERLAY_METADATA"
p0_varlist+=" lv.NOBINFEATURES lv.EXCLUDE"
# phase 1
p1_varlist="yn.UPDATE_CHECK"
# phase 2
p2_varlist="yn.USEPKG yn.USEPKGONLY yn.GETBINPKG yn.GETBINPKGONLY yn.WITH_BDEPS_Y"
p2_varlist+=" yn.NEWUSE yn.CHANGEDUSE"
p2_varlist+=" yn.KEEPGOING lv.EXCLUDE"
# phase 6
p6_varlist="yn.EIX_UPDATE yn.HASKELL_UPDATER yn.MODULE_REBUILD"
p6_varlist+=" yn.PERL_CLEANER yn.PYTHON_UPDATER yn.SELINUX_RELABEL yn.RKHUNTER"
p6_varlist+=" yn.X11_MODULE_REBUILD yn.GLSA_CHECK"
p6_varlist+=" yn.EMAINT_CHECK"

# Main script set these to defaults, override here if needed
# starting_step=0
# stopping_step="$num_cmds"
# NOBINFEATURES='MAKEOPTS="-j1 -l1" FEATURES=" -getbinpkg -userpriv -distcc"'
# EIX="yes"
# DISTCC="yes"
# SELINUX_RELABEL="no"
# PERL_CLEANER="no"
# HASKELL_UPDATER="no"
# REGEN_OVERLAY_METADATA="yes"
# EIX_UPDATE="no"
# NEWUSE="yes"
# CHANGEDUSE="no"
# PYTHON_UPDATER="yes"
# MODULE_REBUILD="no"
# X11_MODULE_REBUILD="no"
# RKHUNTER="no"
# GLSA_CHECK="yes"
# EMAINT_CHECK="yes"
# SYNC="no"
# EXCLUDE=""
# UPDATE_CHECK="no"
# KEEPGOING="yes"
# USEPKG="no"
# USEPKGONLY="no"
# GETBINPKG="no"
# GETBINPKGONLY="no"
# WITH_BDEPS_Y="yes"
# SYNC_TS="${PORTDIR:-var/db/repos/gentoo}/metadata/timestamp.chk"
# SYNC_CMD="EIX_SYNC"
# MAX_AGE=24
# worldfile="/var/lib/portage/world"
# KP_FOUND=$FALSE
# updateables=""
#ELOG_DIR="${PORTAGE_LOGDIR:-/var/log/portage}/elog/"
