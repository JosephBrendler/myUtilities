echo 
echo "NEXT STEPS"
echo "Note: this file is designed to be sourced in a joetoo environment"
echo "Re-read at any time with e.g. source /etc/crossbuild-tools/README_next_steps_after_update"
echo
    message "${BYon}Image update is complete, but there is more you can do...${Boff}"
    message ""
    message "${LBon}You are basically running natively in a working system. You may want to try these${Boff}"
    message "  ${LBon}steps before you exit the chroot and stockpile the image again${Boff} -"
    message "  + run \"${BBon}jus ${BMon}-yZgke${Boff}\" to perform a more thorough update"
    message "  + run \"${BBon}clean-dist ${BMon}-d${Boff}\" to remove distfiles not needed for reinstall"
    message "  + run \"${BBon}clean-pkg ${BMon}-d${Boff}\" to remove binpkgs not needed for reinstall"
    message "  + run \"${BBon}fstrim ${BMon}-v ${LBon}/${Boff}\" to discard unused blocks and make image sparse again"
    message "  + run \"${BBon}emoji_demo${Boff}\" to familiarize with newly available unicode features"
    message "  + verify or reset ownership of user files"
    message "    HINT: ${BBon}ls ${BMon}-al ${LBon}/home/joe ${Boff}; ${BBon}chown ${BMon}-R ${BYon}joe:joe ${LBon}/home/joe${Boff} "
    message "  + etc"
    message ""
    message "${LBon}Remember, if you intend to deploy this image, these things have to be done${Boff}"
    message "    after the image is deployed to new media--${Boff}"
    message "  + use blkid to fix /etc/fstab (change partuuid for / and /boot)"
    message "    HINT: use e.g. blkid | grep /sdb >> /mnt/to/etc/fstab; nano /mnt/to/etc/fstab"
    message "  + use the same info to update boot config .txt file(s) --"
    message "    raspi: cmdline.txt, config.txt | rockchip: joetooEnv.txt"
    message "  + confirm/create appropriate links/paths in boot config, e.g. Image -> vmlinuz..."
    message "  + create swapfile ; turn it on ; add swap to /etc/fstab"
    message "    (use host system swap until new image media is deployed)"
    message "    (for RAM < 2G, swap = 2 * RAM; for RAM > 2G, swap = RAM + 2G for example --"
    message "        cd /mnt/to/var/cache/swap"
    message "        dd if=/dev/zero of=swap1  bs=1M count=4096 status=progress"
    message "        chmod 600 swap1 ; mkswap swap1"
    message ""
    message "${LBon}When finished deploying the image, un-mount as follows --${Boff}"
    message "  + cd; umount -R /mnt/to ; cb-umount \${BOARD}"
    message "    NOTE: to umount ${BOARD}.img manually, --"
    message "        umount -R /usr/${TARGET}"
    message '        loop_dev=$(echo $root_dev | sed "s|p2||")'
    message '        losetup -D ${loop_dev}'
    message ""
    message "${LBon}These things have to be done after the deployed image boots --${Boff}"
    message "  on a real system for the first time --"
    message "  + verify current date/time"
    message "  + examine output of dmesg and logs, fix issues"
    message "  + run emerge --sync or eix-sync/update"
    echo
    message "${BWon}To do: some of the above may be automated by additional tools...${Boff}"
echo 
echo "NEXT STEPS"
echo "Note: this file is designed to be sourced in a joetoo environment"
echo "Re-read at any time with e.g. source /etc/crossbuild-tools/README_next_steps_after_update"
echo
