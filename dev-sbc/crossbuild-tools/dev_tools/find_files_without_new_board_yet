#!/bin/bash
source /usr/sbin/script_header_joetoo

PN=$(basename $0)
if [ $# -eq 0 ] ;then
    E_message "${BRon}usage: ${BGon}${PN} ${LBon}<BOARD>${Boff}"
    E_message "${BYon}Where BOARD is one of --${Boff}"
    joetoo-sbc-list | awk '{print $1}' | sed 's|^|    |'
    exit 1
fi
VERBOSE=$TRUE
verbosity=2

newboard="$1"
searchdir=$(pwd)
filter="dev_tools\|archive\|admin_files"

message "looking for $newboard in $searchdir"; echo
for x in $(find ${searchdir} -type f | grep -v "${filter}" ) ; do
    d_message "examining $x ..." 5
    if [ ! -z "$(grep -i 'bcm2708' $x)" ] && [ -z "$(grep -i ${newboard} $x)" ] ; then
        E_message "    ${BRon}===> ${MBon}$x${Boff} has bcm2708 but NOT ${newboard}"
    fi
done
